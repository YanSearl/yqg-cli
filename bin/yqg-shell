#!/usr/bin/env node
'use strict';

function _interopDefault (ex) { return (ex && (typeof ex === 'object') && 'default' in ex) ? ex['default'] : ex; }

var chalk = _interopDefault(require('chalk'));
var prompt = _interopDefault(require('prompt'));
var child_process = require('child_process');
var path = _interopDefault(require('path'));
require('@babel/polyfill');

var version = "0.0.12";

var signature = "yqg-cli@".concat(version);

prompt.message = chalk.yellow(signature);
var prompt$1 = (function (properties) {
  return new Promise(function (resolve, reject) {
    prompt.start();
    prompt.get({
      properties: properties
    }, function (err, ret) {
      return err ? reject(err) : resolve(ret);
    });
  });
});

/**
 * @author panezhang
 * @date 28/12/2017-19:19
 * @file yqg-angular
 */
var resolveScript = function resolveScript(filename) {
  return path.resolve(__dirname, './yqg-resource/shell', filename);
};

var scripts$1 = [{
  filename: 'git-clean-local-branch.sh',
  desc: '清理本地的 release 分支'
}, {
  filename: 'git-clean-remote-branch.sh',
  desc: '清理远程的 release 分支'
}];
var hintText = scripts$1.map(function (script, idx) {
  return "".concat(chalk.yellow(idx + 1), ". ").concat(chalk.green(script.filename), " ").concat(script.desc);
}).join('\n');
console.log("\u8BF7\u9009\u62E9\u8981\u6267\u884C\u7684\u811A\u672C\uFF1A\n".concat(hintText, "\n"));
var properties = {
  no: {
    pattern: /^\d+$/,
    description: '输入一个序号',
    message: '只能输入数字',
    required: true
  }
};
prompt$1(properties).then(function (result) {
  var script = scripts$1[result.no - 1];

  if (!script) {
    console.error("\u5E8F\u53F7\u4E3A ".concat(result.no, " \u7684\u811A\u672C\u4E0D\u5B58\u5728\uFF01"));
    return;
  }

  child_process.execFileSync(resolveScript(script.filename), {
    stdio: 'inherit'
  });
}).catch(console.error);
